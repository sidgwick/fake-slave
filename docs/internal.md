# fake slave 工作原理

# 基本知识

开始之前, 先介绍一些基本概念.

MySQL 主服务器和从服务器之间的数据交换是通过 `packet` 来完成的. 每个 `packet`
的前三个字节表示了这个 `packet` 的长度. 第四个字节标识这个 `packet`
的序号(在需要多个包才能完全描述某些信息的场景使用). 所以, 一次收到的数据长度为
`packet` 的长度 + 4 字节.

下面是一个示例包:

```
07 00 00 02 00 00 00 02    00 00 00
```

表示这个包为 `0x07` 长, 序号是 `0x02`.

# 连接 MySQL master 服务器

此处直接发起一个目标 master 服务器的连接请求, 一旦连接成功, master
会发送握手包回来, 所以我们的收到的第一部分数据, 是握手包.

握手包包含了如下信息:


